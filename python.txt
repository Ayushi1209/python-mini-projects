$roles = "Owner", "Contributor", "User Access Administrator", "Role Based Access Control Administrator", "Azure SetupAsService"
foreach ($role in $roles) {
    Write-Host "Role: $role"
    $roleAssignments = Get-AzRoleAssignment -Scope /subscriptions/$SubscriptionId | Where-Object { $_.RoleDefinitionName -eq $role -and $_.ObjectType -eq "User"} 
    foreach ($assignment in $roleAssignments) {
        $displayName = $assignment.DisplayName
        $displayNameToShow = if ($displayName -like '*\*\*\*') { $assignment.ObjectId } else { $displayName }
        $assignment | Select-Object RoleDefinitionName, @{Name="DisplayName"; Expression={$displayNameToShow}}, @{Name="Subscription Name"; Expression={$SubscriptionName}} 
    }
}
